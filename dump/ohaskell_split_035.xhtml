<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru-RU">
  <!-- This file was converted to xhtml by Writer2xhtml ver. 1.0.2. See http://writer2latex.sourceforge.net for more info. -->
  <head>
    <title>Неизв.</title>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <link href="http://purl.org/dc/elements/1.1/" rel="schema.DC"/>
    <meta content="" name="DC.title"/>
    <meta content="" name="DC.subject"/>
    <meta content="" name="DC.description"/>
    <meta content="" name="DC.creator"/>
    <meta content="2014-03-16T18:27:08" name="DC.date"/>
    <meta content="" name="DC.language"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body dir="ltr" class="calibre">
<h2 id="toc108" class="calibre8">Функции с побочными эффектами</h2>
    <p class="calibre16">О чистых функциях вы уже знаете. Пришла пора поговорить о функциях, имеющих побочные эффекты.</p>
    <h3 id="toc109" class="calibre22">Чистота vs нечистота</h3>
    <p class="calibre16">Как вы помните, чистые функции не имеют побочных эффектов, что делает их отражением математического понятия «функция»: полученное на входе однозначно определяет то, что будет на выходе. И всё бы замечательно, но наше приложение обязано взаимодействовать с внешним миром, а чистые функции никак не подходят на роль «послов во внешний мир».</p>
    <p class="calibre16">Допустим, у нас есть функция чтения текста из файла: она принимает строку с путём к этому файлу, а возвращает строку с содержимым файла:</p>
    <p class="calibre16"> </p>
    <p class="aa"><span>readMyFile</span> :: <span class="aaaa">String</span> -&gt; <span class="aaaa">String</span></p>
    <p class="aa"><span>readMyFile</span> path =</p>
    <p class="aa">    <span class="aa1">-- открываем соответствующий файл,</span></p>
    <p class="aa">    <span class="aa1">-- читаем его и возвращаем строку с его содержимым...</span></p>
    <p class="calibre16"> </p>
    <p class="calibre16">Но такая функция не может быть чистой. Если мы два раза применим её к строке с путём к одному и тому же файлу, можем ли мы гарантировать, что возвращённое содержимое будет одним и тем же? Конечно же нет, ведь между первым и вторым применениями этот файл мог быть трижды изменён. В этом случае математичность такой функции лопнет как мыльный пузырь: дважды применили к одному и тому же аргументу, а результат на выходе получили разный.</p>
    <p class="calibre16">Именно поэтому взаимодействие с внешним миром — это царство функций с побочными эффектами.</p>
    <h3 id="toc110" class="calibre22">Действие vs бездействие</h3>
    <p class="calibre16">Чистая функция — это мир бездействия. Мир спокойствия и тишины. Как вы уже знаете, такая функция состоит из совокупности выражений, которые вычисляются в некотором порядке и в конце концов оставляют некое последнее, итоговое значение, которым компилятор просто заменяет место вызова этой функции.</p>
    <p class="calibre16">А вот функции с побочными эффектами — это мир действия. Мир, в котором всё меняется. Именно поэтому при работе с вводом и выводом нам понадобятся действия (actions). Действие — это то, что соприкасается с внешним миром, а зачастую ещё и оказывает на него влияние. Нужно прочитать файл? Добро пожаловать во внешний мир. Нужно отправить UDP-дейтаграмму? Вам во внешний мир. Нужно прочесть строку, введённую пользователем с клавиатуры? Внешний мир ждёт вас.</p>
    </body>
</html>
